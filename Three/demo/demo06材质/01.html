<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <style>
        canvas{
            width: 100%;
            height: 100%;
            display: block;
        }
    </style>
</head>
<body>

</body>
<script src="../js/three108.js"></script>
<script src="../js/Stats.js"></script>
<script src="../js/dat.gui.min.js"></script>
<script>
    var renderer,camera,scene,stats,controls,gui,route = true;

    var box, circle,cone,cylinder,sphere,plane,torus,line,curveLine;
    function initRenderer() {
        renderer = new THREE.WebGLRenderer();
        renderer.setSize(window.innerWidth,window.innerHeight);
        document.body.appendChild(renderer.domElement);
    }
    function initScene() {
        scene = new THREE.Scene();
    }
    function initCamera() {
        camera = new THREE.PerspectiveCamera(45,
            window.innerWidth/window.innerHeight
        ,0.1,200
        );
        camera.position.set(0,0,150);


    }
    function initLight() {
        var light = new THREE.DirectionalLight(0xffffff);
        light.position.set(20,50,50);
        scene.add(light);
        //添加一个全局环境光
        scene.add(new THREE.AmbientLight(0x222222));
    }
    function initMesh() {
        var material = new THREE.MeshBasicMaterial();

        // 直线
        var pointsArr = [
            new THREE.Vector3(-10,0,-5),
            new THREE.Vector3(-5,15,5),
            new THREE.Vector3(20,15,-5),
            new THREE.Vector3(10,0,5),
        ];
        var lineGeometry = new THREE.Geometry(); //实例化几何体
        lineGeometry.setFromPoints(pointsArr); //使用当前的点配置几何体

        var lineMaterial = new THREE.LineBasicMaterial({color:0x00ff00});

        line = new THREE.Line(lineGeometry,lineMaterial);
        line.position.set(-65,-30,0);
        scene.add(line);
        //添加曲线线

        //指定一些用于生成曲线线的三维顶点
        var curve = new THREE.CatmullRomCurve3(pointsArr);

        var points = curve.getPoints( 50 ); //使用getPoints获取当前曲线分成50段后的所有顶点
        var curveGeometry = new THREE.BufferGeometry().setFromPoints( points ); //使用顶点生成几何体

        var curveMaterial = new THREE.LineDashedMaterial( { color : 0xff0000 } ); //创建一条红色的线材质

        // 使用THREE.Line创建线
        curveLine = new THREE.Line( curveGeometry, curveMaterial );
        curveLine.computeLineDistances(); //需要重新计算位置才能显示出虚线
        curveLine.position.set(-65, -30, 0);
        scene.add(curveLine);


        // 立方体
        box = new THREE.Mesh(new THREE.BoxGeometry(5,5,5),new THREE.MeshLambertMaterial({color:0x00ffff}));
        box.position.set(-50,20,0);
        scene.add(box);
        // 圆形
        circle = new THREE.Mesh(new THREE.CircleGeometry(5,32),new THREE.MeshNormalMaterial());
        circle.position.set(-20,20,0);
        scene.add(circle);
        // 圆柱
        cylinder = new THREE.Mesh(new THREE.CylinderGeometry(5,5,20,32),new THREE.MeshPhongMaterial({color:0x00ffff}));
        cylinder.position.set(50,20,0);
        scene.add(cylinder);
        // 圆锥
        cone = new THREE.Mesh(new THREE.ConeGeometry(5, 20, 32), new THREE.MeshPhongMaterial({color:0x00ffff}));
        cone.position.set(20, 20, 0);
        scene.add(cone);
        // 球体
        sphere = new THREE.Mesh(new THREE.SphereGeometry(5, 32, 32), new THREE.MeshPhongMaterial({color:0x00ffff}));
        sphere.position.set(-20, -20, 0);
        scene.add(sphere);
        // 平面
        plane = new THREE.Mesh(new THREE.PlaneGeometry(5,5),);
        plane.position.set(0,-20,0);
        scene.add(plane);
        // 圆环
        torus = new THREE.Mesh(new THREE.TorusGeometry(10,3,16,100),material);
        torus.position.set(35,0,0);
        scene.add(torus);
    }
    //运行 动画
    var step =0;
    function animate() {
        requestAnimationFrame(animate);
        if(route){
            step +=0.02;

            box.rotation.set(step,step,step);
            circle.rotation.set(step, step, step);
            cone.rotation.set(step, step, step);
            cylinder.rotation.set(step, step, step);
            sphere.rotation.set(step, step, step);
            plane.rotation.set(step, step, step);
            torus.rotation.set(step, step, step);
        }
        stats.update();
        renderer.render(scene,camera);
    }
    //性能检测
    function initStats(){
        stats = new Stats();
        console.log(stats)
        document.body.appendChild(stats.domElement);
    }
    window.onload=function () {
        initStats();
        initRenderer();
        initScene();
        initCamera();
        initScene();
        initLight();
        initMesh();
        animate();
    }
</script>
</html>